<!-- Modal -->
<div class="modal fade modal-xl" id="ModalCadastrarLeitor" tabindex="-1" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal_maior">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Leitor</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="card border-0 shadow-sm">
          <div class="card-body">
            <form method="post" action="{{url('admin/leitores/cadastrar')}}" id="cadastrarLeitor"
              enctype="multipart/form-data">

              <h5 class="modal-title fw-bold" id="exampleModalLabel">Cadastrar Leitor</h5>
              <div class="row">
                <div class="col-lg-11-3qtr card border-2 shadow-sm mt-2 mb-3 me-4 ms-4">
                  <div class="card-body">
                    <div class="row mb-3">
                      <div class="col-sm-3 card border-2 me-4">
                        <div class="card-body">
                          <div class="row mb-2">
                            <div class="col-sm-12 card border-2">
                              <div class="card-body">
                                <img src='' alt="" id="imgLogo">
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-md-12">
                              <div class="mb-3">
                                <label for="foto_leitor" class="form-label">Foto Leitor</label>
                                <input type="file" name="foto_leitor" id="foto_leitor" class="form-control"
                                  onchange="previewCadastro()" required>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-sm-8-3qtr card border-2">
                        <div class="card-body">
                          <div class="row">
                            <div class="col-md-5">
                              <div class="mb-3">
                                <label for="cpf_leitor" class="form-label">CPF</label>
                                <input type="text" name="cpf_leitor" id="cpf_leitor" class="form-control cpf_leitor" required>
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-md-8">
                              <div class="mb-3">
                                <label for="nome_leitor" class="form-label">Nome</label>
                                <input type="text" name="nome_leitor" class="form-control" required>
                              </div>
                            </div>
                            <div class="col-md-4">
                              <div class="mb-3">
                                <label for="data_nascimento_leitor" class="form-label">Data Nascimento</label>
                                <input type="date" name="data_nascimento_leitor" class="form-control" required>
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-md-4">
                              <div class="mb-3">
                                <label for="telefone_leitor" class="form-label">Telefone</label>
                                <input type="text" name="telefone_leitor" id="telefone_leitor" class="form-control telefone_leitor" required>
                              </div>
                            </div>
                            <div class="col-md-4">
                              <div class="mb-3">
                                <label for="sexo_leitor_id" class="form-label">Sexo</label>
                                <select id="sexo_leitor_id" name="sexo_leitor_id" class="form-control" required>
                                  <option value=""><span class="flag-icon flag-icon-gr"></span>Selecione</option>
                                  <option value="1"><span class="flag-icon flag-icon-gr"></span>MASCULINO</option>
                                  <option value="2"><span class="flag-icon flag-icon-gr"></span>FEMININO</option>
                                </select>
                              </div>
                            </div>
                            <div class="col-md-4">
                              <div class="mb-3">
                                <label for="cor_leitor_id" class="form-label">Cor/Raça</label>
                                <select id="cor_leitor_id" name="cor_leitor_id" class="form-control" required>
                                  <option value=""><span class="flag-icon flag-icon-gr"></span>Selecione
                                  </option>
                                  {% for cor_raca in cor_racas %}
                                  <option value="{{cor_raca.id}}">
                                    {{cor_raca.cor_raca }}
                                  </option>
                                  {% endfor %}
                                </select>
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-md-4">
                              <div class="mb-3">
                                <label for="escolaridade_leitor_id" class="form-label">Escolaridade</label>
                                <select id="escolaridade_leitor_id" name="escolaridade_leitor_id" class="form-control" required>
                                  <option value=""><span class="flag-icon flag-icon-gr"></span>Selecione
                                  </option>
                                  {% for escolaridade in escolaridades %}
                                  <option value="{{escolaridade.id}}">
                                    {{escolaridade.escolaridade }}
                                  </option>
                                  {% endfor %}
                                </select>
                              </div>
                            </div>
                            <div class="col-md-8">
                              <div class="mb-3">
                                <label for="email_leitor" class="form-label">E-mail</label>
                                <input type="text" name="email_leitor" class="form-control">
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-md-8">
                              <div class="mb-3">
                                <label for="rede_social_leitor" class="form-label">Rede Social</label>
                                <input type="text" name="rede_social_leitor" class="form-control">
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-sm-12 card border-2">
                        <div class="card-body">
                          <div class="row">
                            <div class="col-md-5">
                              <div class="mb-3">
                                <label for="cep_leitor" class="form-label">CEP</label>
                                <input type="text" name="cep_leitor" id="cep_leitor" class="form-control cep_leitor">
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-md-12">
                              <div class="mb-3">
                                <label for="rua_leitor" class="form-label">Rua</label>
                                <input type="text" name="rua_leitor" id="rua_leitor" class="form-control" required>
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-md-4">
                              <div class="mb-3">
                                <label for="bairro_leitor" class="form-label">Bairro</label>
                                <input type="text" name="bairro_leitor" id="bairro_leitor" class="form-control" required>
                              </div>
                            </div>
                            <div class="col-md-3">
                              <div class="mb-3">
                                <label for="numero_leitor" class="form-label">Número</label>
                                <input type="text" name="numero_leitor" id="numero_leitor" class="form-control">
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-md-12">
                              <div class="mb-3">
                                <label for="ponto_de_referencia_leitor" class="form-label">Ponto de Referência</label>
                                <textarea id="ponto_de_referencia_leitor" name="ponto_de_referencia_leitor" class="form-control"
                                  rows="3"></textarea>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="mb-3">
                    <button type="button" class="btn btn-dark me-2 cadastrarLeitor" value="">Cadastrar</button><button
                      type="button" class="btn btn-warning" onClick="window.location.reload();">
                      Cancelar </button>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
  function previewCadastro() {

    var uploadField = document.getElementById("foto_leitor");
    var fname = uploadField.files[0].name;
    
    if (uploadField.files[0].size > 8097152) {
      Swal.fire({
        title: "Alerta!",
        text: "A imagem escolhida está acima do limite permitido (8Mb)!",
        icon: "warning"
      });
      uploadField.value = "";
    } else if (!['png', 'jpeg', 'jpg'].includes(fname.slice((Math.max(0, fname.lastIndexOf(".")) || Infinity) + 1))) {
      Swal.fire({
        title: "Alerta!",
        text: "A imagem não tem um formato permitido!",
        icon: "warning"
      });
      uploadField.value = "";
    }
    else {
      imgLogo.src = URL.createObjectURL(event.target.files[0]);
    }


  }
</script>